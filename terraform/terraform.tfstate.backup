{
  "version": 4,
  "terraform_version": "1.14.0",
  "serial": 21,
  "lineage": "644a6d12-1543-e778-1f1a-a376e2a4e87e",
  "outputs": {
    "cluster_endpoint": {
      "value": "Run: minikube ip -p voting-app-dev",
      "type": "string"
    },
    "cluster_name": {
      "value": "voting-app-dev",
      "type": "string"
    },
    "deployment_status": {
      "value": {
        "app_deployed": "‚úÖ Vote, Result, and Worker services",
        "cluster_provisioned": "‚úÖ Minikube cluster created",
        "databases_deployed": "‚úÖ PostgreSQL and Redis via Helm",
        "images_built": "‚úÖ Docker images built in Minikube",
        "ingress_configured": "‚úÖ Nginx ingress with vote.local and result.local",
        "security_enabled": "‚úÖ NetworkPolicies and Pod Security Admission"
      },
      "type": [
        "object",
        {
          "app_deployed": "string",
          "cluster_provisioned": "string",
          "databases_deployed": "string",
          "images_built": "string",
          "ingress_configured": "string",
          "security_enabled": "string"
        }
      ]
    },
    "environment": {
      "value": "dev",
      "type": "string"
    },
    "ingress_urls": {
      "value": {
        "result": "http://result.local",
        "vote": "http://vote.local"
      },
      "type": [
        "object",
        {
          "result": "string",
          "vote": "string"
        }
      ]
    },
    "kubernetes_version": {
      "value": "1.28.3",
      "type": "string"
    },
    "namespace": {
      "value": "voting-app",
      "type": "string"
    },
    "next_steps": {
      "value": "    \n‚úÖ Deployment Complete!\n    \nThe voting application has been automatically deployed via Terraform.\n    \n‚ö†Ô∏è  IMPORTANT: Configure /etc/hosts first!\n   Run: ./terraform/configure-hosts.sh\n   Or manually add to /etc/hosts:\n     $(minikube ip -p voting-app-dev) vote.local\n     $(minikube ip -p voting-app-dev) result.local\n    \nAccess the application:\n   Vote:   http://vote.local\n   Result: http://result.local\n    \nVerify deployment:\n   kubectl get pods -n voting-app\n   kubectl get svc -n voting-app\n   kubectl get ingress -n voting-app\n    \nView Helm releases:\n   helm list -n voting-app\n    \nTest the application:\n   curl http://vote.local\n   curl http://result.local\n    \nMinikube commands:\n   minikube status -p voting-app-dev\n   minikube dashboard -p voting-app-dev\n   minikube stop -p voting-app-dev\n",
      "type": "string"
    },
    "resource_config": {
      "value": {
        "cpu_limit": "500m",
        "memory_limit": "512Mi",
        "replicas": 1,
        "storage_size": "5Gi"
      },
      "type": [
        "object",
        {
          "cpu_limit": "string",
          "memory_limit": "string",
          "replicas": "number",
          "storage_size": "string"
        }
      ]
    },
    "seed_instructions": {
      "value": "    \nüìù SEED JOB INSTRUCTIONS:\n    \nThe seed job is OPTIONAL and will NOT run automatically.\n    \nTo run the seed job and generate 3000 test votes:\n    \n  terraform apply -var=\"run_seed=true\" -target=null_resource.run_seed -auto-approve\n    \nOr manually via kubectl:\n    \n  kubectl apply -f ../k8s/manifests/10-seed.yaml\n  kubectl logs -f seed -n voting-app\n    \n",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "local_file",
      "name": "kubeconfig",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "",
            "content_base64": null,
            "content_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
            "content_base64sha512": "z4PhNX7vuL3xVChQ1m2AB9Yg5AULVxXcg/SpIdNs6c5H0NE8XYXysP+DGNKHfuwvY7kxvUdBeoGlODJ6+SfaPg==",
            "content_md5": "d41d8cd98f00b204e9800998ecf8427e",
            "content_sha1": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
            "content_sha256": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
            "content_sha512": "cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./kubeconfig-dev",
            "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "identity_schema_version": 0,
          "dependencies": [
            "null_resource.minikube_cluster"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "build_images",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2575782363148794798",
            "triggers": {
              "cluster_name": "voting-app",
              "environment": "dev",
              "result_src": "e7e8afc08cf0692557d98f57f24f97a2",
              "vote_src": "ffed9a736f9389a7aec359b365731bf9",
              "worker_src": "6f017deed45a735feb946e0c705cf4e3"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "null_resource.minikube_cluster"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "configure_hosts",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "731871302874736923",
            "triggers": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "null_resource.minikube_cluster"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "create_namespace",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4069775149121395306",
            "triggers": {
              "namespace": "voting-app"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "null_resource.minikube_cluster"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "deploy_application",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "9026785496466256953",
            "triggers": {
              "manifests_hash": "14a6709e5691d26d60e323d90470f892",
              "namespace": "voting-app"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "null_resource.build_images",
            "null_resource.create_namespace",
            "null_resource.deploy_databases",
            "null_resource.minikube_cluster"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "deploy_databases",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4089606459461285589",
            "triggers": {
              "environment": "dev",
              "namespace": "voting-app"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "null_resource.build_images",
            "null_resource.create_namespace",
            "null_resource.minikube_cluster"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "minikube_cluster",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "5230430690042210611",
            "triggers": {
              "cluster_name": "voting-app",
              "cpus": "2",
              "environment": "dev",
              "memory": "4096"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "run_seed",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "4942710883935166981",
            "triggers": {
              "seed_run_id": "2025-11-22T10:51:40Z"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "null_resource.build_images",
            "null_resource.create_namespace",
            "null_resource.deploy_application",
            "null_resource.deploy_databases",
            "null_resource.minikube_cluster"
          ]
        }
      ]
    }
  ],
  "check_results": [
    {
      "object_kind": "var",
      "config_addr": "var.environment",
      "status": "pass",
      "objects": [
        {
          "object_addr": "var.environment",
          "status": "pass"
        }
      ]
    }
  ]
}
